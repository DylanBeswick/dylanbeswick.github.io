<html>
	<head>
		<title>Science Final Project</title>
	</head>
	<script>
document.addEventListener("DOMContentLoaded", function() {
console.log("Science Final Project by Dylan Beswick");
prj_volcano_data = [

["Sangay",            275,  330,   [true,  true,  false, true,  true,  true,  true,  true,  true,  true,  true,  true ]],

["Santa María",       244,  272,   [true,  false, true,  false, false, false, false, false, false, false, false, false]],

["Stromboli",         613,  165,   [true,  true,  true,  true,  true,  true,  true,  true,  true,  true,  true,  true ]],

["Mount Etna",        634,  173,   [false, false, true,  false, true,  false, false, true,  true,  true,  true,  true ]],

["Mount Yasur",       1175, 444,   [false, false, false, false, false, false, false, false, false, true,  true,  true ]],

["Santorini caldera", 663,  186,   [false, false, true,  true,  false, true,  false, false, false, false, false, false]],

["Mount Vesuvius",    606,  150,   [true,  false, false, false, true,  false, false, false, false, false, false, false]],

["Mount Nyiragongo",  680,  334,   [false, false, false, false, false, false, false, true,  false, false, true,  false]], 

["Mauna Loa",         23,   237,   [true,  true,  true,  true,  true,  true,  false, false, true,  false, false, false]],

["Sakurajima",        1043, 184,   [false, true,  false, false, false, true,  true,  true,  true,  true,  true,  true ]]
];
prj_remove = function(obj) {
	try {
		obj.remove()
	}
	catch(e) {
		try {
			obj.outerHTML = ""
		}
		catch(e) {}
	}
}
prj_decade = function(index, pnt) {
	document.getElementsByClassName('year')[0].innerHTML = index*10 + 1900
    var nv = document.getElementsByClassName('volcano').length;
    for (var y = 0; y < nv; y++) {
        prj_remove(document.getElementsByClassName('volcano')[0])
    }
    for (var z = 0; z < prj_volcano_data.length; z++) {
        if (pnt || false) {
            console.log(prj_volcano_data[z][0] + ': (' + prj_volcano_data[z][1] + ', ' + prj_volcano_data[z][2] + '), ' + prj_volcano_data[z][3][index])
        };
        var v = document.createElement('div');
        v.classList.add("volcano");
        v.style.left = (prj_volcano_data[z][1] - 5) / 1264 * document.getElementsByClassName("main-img")[0].clientWidth;
        v.style.top = (prj_volcano_data[z][2] - 5) / 554.58 * document.getElementsByClassName("main-img")[0].clientHeight;
        v.style.position = "absolute";
        var w = document.createElement('img');
        w.src = (prj_volcano_data[z][3][index]) ? ("http://ipex.pw/static/final-science-project/active_volcano.png") : ((!prj_volcano_data[z][3][index]) ? ("http://ipex.pw/static/final-science-project/dormant_volcano.png") : ("http://ipex.pw/static/final-scienceproject/active_volcano.png"));
        w.style.width = 20;
        v.dataset.vname = prj_volcano_data[z][0];
        var az = '';
        for (var q = 0; q < prj_volcano_data[z][3].length; q++) {
            az = az + '<br><span' + (((q * 10 + 1900) == prj_decade_year) ? (' style="color:red"') : ((!(q * 10 + 1900) == prj_decade_year) ? ('') : (''))) + '><b>' + (q * 10 + 1900) + '</b>: ' + prj_volcano_data[z][3][q].toString().replace(/true/, 'Active').replace(/false/, 'Inactive') + '</span>';
        };
        v.addEventListener("mouseover", new Function("var nv=document.getElementsByClassName('hover-list').length; for (var j=0; j < nv; j++) {prj_remove(document.getElementsByClassName('hover-list')[0])}; var b = document.createElement('div'); b.className = 'hover-list'; b.style.zIndex = 9000; b.style.position = 'absolute'; b.innerHTML = '<h4 style=\"margin-top: 0; margin-bottom: 0\">" + prj_volcano_data[z][0] + "</h4>" + az + "'; b.style.backgroundColor = '#999999'; b.style.left = prj_mig_cur_x + 20; b.style.top = prj_mig_cur_y; prj_mdv.appendChild(b)"));
        v.addEventListener('mouseout', function() {
            var nv = document.getElementsByClassName('hover-list').length;
            for (var j = 0; j < nv; j++) {
                prj_remove(document.getElementsByClassName('hover-list')[0])
            }
        });
        v.appendChild(w);
        document.getElementsByClassName("placement-div")[0].appendChild(v)
    }
};
prj_decade_year = undefined;
prj_update = function() {
    prj_mig = document.getElementsByClassName("main-img")[0];
    prj_mig_w = prj_mig.clientWidth;
    prj_mig_h = prj_mig.clientHeight;
    prj_mig.onmousemove = function(e) {
        prj_mig_cur_x = e.pageX;
        prj_mig_cur_y = e.pageY
    };
    prj_mdv = document.getElementsByClassName("placement-div")[0]
    prj_decade_year = prj_decade_year || 1900;
    prj_decade_index = (prj_decade_year - 1900) / 10;
    prj_decade(prj_decade_index, 0)
};
prj_next = function() {
    if (prj_decade_year < 2010) {
        prj_decade_year += 10;
        prj_update()
    }
};
prj_previous = function() {
    if (prj_decade_year > 1900) {
        prj_decade_year -= 10;
        prj_update()
    }
};
window.addEventListener("resize", prj_update);
setInterval(prj_update, 120)
});
//' + 
	</script>
	<body>
                <div class="placement-div" style="width:100%">
			<img src="https://upload.wikimedia.org/wikipedia/commons/e/e0/BlankMap-World-1985.png" class="main-img" style="width:100%">
		</div>
		<div style="text-align: center"><a href="javascript:prj_previous();">Previous Decade</a><b class="year" style="padding-left:20px; padding-right:20px"></b><a href="javascript:prj_next();">Next Decade</a></div>
	</body>
</html>